german_confederation = {

	has_target = no
	unique = yes
	expel_members_who_are_targets_of_other_members = no
	
	show_leave_message = yes
	use_laws_as_join_reason = no

	show_as_overlord_on_map_trigger = {
		always = yes
	}

	has_parliament = yes
	parliament_type = hre_court_assembly
	resolution_widget = parliament
	has_dynastic_power = yes
	
	has_leader_country = yes
	leader_title_key = "HRE_LEADER"
	use_regnal_number = yes
	leader_type = character
	leader = {
		leader_country ?= {
			if = {
				limit = {
					has_regent = yes
					has_heir = yes
				}
				heir ?= {
					add_to_list = leaders
				}
			}
			else_if = {
				limit = {
					has_ruler = yes
					ruler ?= { is_alive = yes }
				}
				ruler ?= {
					add_to_list = leaders
				}
			}
		}
	}
	disband_if_no_leader = no #can have no leader while there's a power battle to get enough votes
	override_ruler_title = no

	can_declare_war = {
		trigger_if = {
			limit = {
				scope:recipient = { modifier:enforced_internal_peace = yes }
				scope:attacker = { is_member_of_international_organization = scope:recipient }
				scope:defender = { is_member_of_international_organization = scope:recipient }
			}
			scope:recipient = { modifier:enforced_internal_peace = no }
		}
		trigger_else = {
			always = yes
		}
	}

	gives_military_access_to_all_when_at_war = yes

	can_initiate_policy_votes = {
		is_leader_of_international_organization = scope:recipient
		scope:recipient = {
			has_member = root
			international_organization_has_leader = yes
		}
	}

	antagonism_modifier_for_taking_land_from_fellow_member = 0.75	  # Members get more Antagonism in the HRE
	antagonism_modifier_for_taking_land_from_member_as_outsider = 1.0 # Outsiders get even more Antagonism in the HRE
	no_cb_price_modifier_for_fellow_member = 0.75

	modifier = {
		block_from_change_to_kingdom_rank = yes
		block_from_change_to_empire_rank = yes
		block_from_change_to_duchy_rank = yes
		reject_subjugation_reasons = 25
	}

	international_organization_modifier = {
		
	}
	
	leader_modifier = {
		great_power_score_exempt_from_forfeit = 250

		diplomatic_capacity = 1
		
		allowed_alliance = yes
		allowed_guarantee = yes
		allowed_support_rebels = yes
		allowed_intervene_in_war = yes
		allowed_enforce_peace = yes
		allowed_threaten_war = yes

	}
	
	create_visible_trigger = {
		always = no
	}

	invite_visible_trigger = {
		always = yes
	}

	can_lead_trigger = {
		is_subject = no
		hre_country_fulfills_imperial_religion_requirement = { type = voting }
	}
	
	can_join_trigger = {
		always = no
	}
	
	can_leave_trigger = {
		always = no
	}
	
	auto_leave_trigger = {
		always = no
	}

	can_vote_in_parliament = {
		"country_highest_rated_special_status_power(scope:recipient)" > 0
	}
	
	auto_disband_trigger = {
		always = no
	}

	on_joined = {
	}

	on_left = {
	}
	
	monthly_effect = {
	}
	
	variables = {
		imperial_authority = {
			format = "IMPERIAL_AUTHORITY_DISPLAY"
			change_format = "VARIABLE_CHANGE_FORMAT"
			min = 0
			max = 100
			monthly_change = {
				add = {
					
					#number of princes
					add = {
						desc = "NUMBER_OF_PRINCES"
						value = total_members
					}
					
				}
			}
		}
	}

	special_statuses_implemented = {
		prasidialmacht
		member
	}

	ai_desire_to_join = {
		always = no
	}
	
	ai_desire_to_allow_new_member = {
		always = no
	}
	
	ai_issue_voting_bias = {
		add = {
			desc = "INERTIA"
			value = -1
		}
		
		#passing policies is what makes the empire great, so if the leader can enact one, they will
		add = {
			desc = "POLICY_BIAS_LEADER_ALWAYS_WANTS"
			if = {
				limit = {
					scope:recipient = {
						leader_country ?= scope:actor
					}
				}
				#this should end up with 20 for yes and -20 for no from the leader
				if = {
					limit = {
						is_set = scope:vote
					}
					value = 1
				}
				else = {
					value = -1
				}
				multiply = 20
			}
		}
		
		#opinion of leader
		add = {
			desc = "POLICY_BIAS_OPINION_OF_EMPEROR"
			if = {
				limit = { not = { scope:actor = scope:recipient.leader_country } }
				scope:recipient = {
					leader_country = {
						if = {
							limit = {
								is_set = scope:vote
							}
							value = 1
						}
						else = {
							value = -1
						}
						multiply = scope:actor.this_opinion_of_prev
						multiply = 0.1 
					}
				}
			}
		}
		#Emperor modifiers
		add = {
			desc = "MODIFIER_TYPE_NAME_reasons_to_vote"
			if = {
				limit = { not = { scope:actor = scope:recipient.leader_country } }
				value = scope:recipient.leader_country.modifier:reasons_to_vote
			}
		}
	}
}